<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Health Pro v9 - Murat ASLI</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0f172a">
    <style>
        :root {
            --bg: #0f172a; --card: #1e293b; --primary: #38bdf8; --sec: #818cf8; --text: #f8fafc; --dim: #94a3b8; --success: #22c55e; --burn: #fb7185; --water: #0ea5e9;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; }
        .page { display: none; padding: 20px 15px 100px 15px; min-height: 100vh; box-sizing: border-box; animation: slideUp 0.3s ease; }
        .page.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        
        .card { background: var(--card); border-radius: 25px; padding: 20px; border: 1px solid rgba(255,255,255,0.05); margin-bottom: 15px; }
        h1 { font-size: 1.3rem; text-align: center; margin-bottom: 20px; color: var(--primary); }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 15px; }
        input, select { width: 100%; padding: 14px; background: #0f172a; border: 2px solid #334155; border-radius: 12px; color: white; font-size: 0.9rem; box-sizing: border-box; }
        label { font-size: 0.65rem; color: var(--dim); display: block; margin-bottom: 5px; font-weight: 700; text-transform: uppercase; }
        
        .btn { width: 100%; padding: 16px; border-radius: 14px; border: none; font-weight: 800; cursor: pointer; transition: 0.2s; }
        .tab-bar { position: fixed; bottom: 0; width: 100%; background: #1e293b; display: flex; padding: 12px 0; border-top: 1px solid rgba(255,255,255,0.1); z-index: 1000; }
        .tab-item { flex: 1; text-align: center; color: var(--dim); font-size: 0.6rem; cursor: pointer; }
        .tab-item.active { color: var(--primary); }
        
        .res-box { text-align: center; padding: 15px; background: rgba(56, 189, 248, 0.1); border-radius: 15px; border: 1px dashed var(--primary); margin-top: 15px; }
        .highlight { font-size: 1.8rem; font-weight: 900; color: var(--primary); display: block; }
        .log-item { background: rgba(0,0,0,0.2); padding: 10px; border-radius: 10px; margin-bottom: 5px; display: flex; justify-content: space-between; font-size: 0.8rem; }
    </style>
</head>
<body>

<div id="p-calc" class="page active">
    <h1>PROFESYONEL ANALÄ°Z</h1>
    <div class="card">
        <div class="grid">
            <div><label>BOY (CM)</label><input type="number" id="h" value="180"></div>
            <div><label>KÄ°LO (KG)</label><input type="number" id="w" value="80"></div>
            <div><label>YAÅ</label><input type="number" id="age" value="34"></div>
            <div><label>BOYUN (CM)</label><input type="number" id="neck" value="40"></div>
            <div style="grid-column: span 2"><label>BEL Ã‡EVRESÄ° (CM)</label><input type="number" id="waist" value="90"></div>
        </div>
        <button class="btn" style="background: var(--primary); color:#0f172a" onclick="profAnalysis()">HESAPLA</button>
        
        <div id="analysis-res" class="res-box" style="display:none">
            <div class="grid">
                <div><label>YAÄ ORANI</label><span class="highlight" id="res-fat">%--</span></div>
                <div><label>BAZAL METAB.</label><span class="highlight" id="res-bmr">--</span></div>
            </div>
            <p id="analysis-msg" style="font-size:0.75rem; margin-top:10px; color:var(--dim)"></p>
        </div>
    </div>
</div>

<div id="p-sport" class="page">
    <h1>GÃœNLÃœK HAREKET</h1>
    <div class="card">
        <label>GÃœNLÃœK ADIM SAYISI</label>
        <input type="number" id="steps" value="0" placeholder="Ã–rn: 10000" onchange="updateDailyBurn()">
        <p style="font-size:0.7rem; color:var(--dim); margin: 10px 0;">YaklaÅŸÄ±k: <span id="step-cal">0</span> kcal</p>
        
        <label>EKSTRA SPOR EKLE</label>
        <select id="sportSel"></select>
        <div class="grid" style="margin-top:10px">
            <input type="number" id="sportTime" value="30">
            <button class="btn" style="background:var(--burn); color:white" onclick="addSport()">EKLE</button>
        </div>
        <div id="sport-logs" style="margin-top:15px"></div>
    </div>
</div>

<div id="p-food" class="page">
    <h1>BESLENME GÃœNLÃœÄÃœ</h1>
    <div class="card">
        <label>YEMEK SEÃ‡Ä°N</label>
        <select id="foodSel"></select>
        <div class="grid" style="margin-top:10px">
            <input type="number" id="foodQty" value="1" step="0.5">
            <button class="btn" style="background:var(--success); color:white" onclick="addFood()">EKLE</button>
        </div>
        <div id="food-logs" style="margin-top:15px"></div>
    </div>
</div>

<div id="p-report" class="page">
    <h1>BÄ°LANÃ‡O & TAHMÄ°N</h1>
    <div class="card">
        <div style="text-align:center">
            <label>GÃœNLÃœK NET KALORÄ° (AÃ‡IK/FAZLA)</label>
            <div class="highlight" style="font-size:3rem" id="net-cal">0</div>
            <p id="net-desc" style="font-size:0.8rem"></p>
        </div>
    </div>
    <div class="card" style="background: linear-gradient(135deg, #38bdf8, #818cf8); color: #0f172a;">
        <h3 style="margin:0; font-size:0.9rem;">HAFTALIK PROJEKSÄ°YON</h3>
        <p style="font-size:0.8rem; margin:10px 0;">EÄŸer her gÃ¼n bu ÅŸekilde devam ederseniz:</p>
        <div style="font-size:1.5rem; font-weight:900;" id="week-result">0 gram DeÄŸiÅŸim</div>
        <p style="font-size:0.65rem; opacity:0.8; margin-top:5px;">*7000 kalori aÃ§Ä±ÄŸÄ± = 1 kg yaÄŸ kaybÄ± hesabÄ±yla hesaplanmÄ±ÅŸtÄ±r.</p>
    </div>
</div>

<nav class="tab-bar">
    <div class="tab-item active" onclick="showPage('p-calc')">âš–ï¸<br>ANALÄ°Z</div>
    <div class="tab-item" onclick="showPage('p-sport')">ğŸƒ<br>HAREKET</div>
    <div class="tab-item" onclick="showPage('p-food')">ğŸ<br>BESÄ°N</div>
    <div class="tab-item" onclick="showPage('p-report')">ğŸ“Š<br>RAPOR</div>
</nav>

<script>
    const foodDB = [
        {n:"[KahvaltÄ±] Yumurta",c:75}, {n:"[KahvaltÄ±] Peynir (Dilim)",c:90}, {n:"[KahvaltÄ±] Zeytin (5 Adet)",c:40},
        {n:"[KahvaltÄ±] Yulaf Ezmesi (Pors)",c:150}, {n:"[Ã–ÄŸle] Izgara Tavuk (150g)",c:245}, {n:"[Ã–ÄŸle] Pilav (Pors)",c:350},
        {n:"[Ã–ÄŸle] Mercimek Ã‡orba",c:140}, {n:"[AkÅŸam] KÄ±rmÄ±zÄ± Et (150g)",c:380}, {n:"[AkÅŸam] Salata (YaÄŸlÄ±)",c:120},
        {n:"[AtÄ±ÅŸtÄ±rmalÄ±k] Ceviz/FÄ±ndÄ±k (AvuÃ§)",c:180}, {n:"[AtÄ±ÅŸtÄ±rmalÄ±k] Elma",c:80}, {n:"[Fastfood] Hamburger",c:550}
    ];
    const sportDB = [{n:"AÄŸÄ±rlÄ±k Ant.",c:7},{n:"KoÅŸu (10km/h)",c:11},{n:"YÃ¼zme",c:10},{n:"Bisiklet",c:8},{n:"HIIT",c:13}];

    let user = { w:80, h:180, age:34, bmr:1800, fat:20, dailyBurn:0, dailyTaken:0, logs:[] };

    function showPage(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.tab-item').forEach(t => t.classList.toggle('active', t.getAttribute('onclick').includes(id)));
    }

    function profAnalysis() {
        const h = parseFloat(document.getElementById('h').value);
        const w = parseFloat(document.getElementById('w').value);
        const age = parseInt(document.getElementById('age').value);
        const neck = parseFloat(document.getElementById('neck').value);
        const waist = parseFloat(document.getElementById('waist').value);

        // Donanma YaÄŸ OranÄ± FormÃ¼lÃ¼ (Erkek)
        user.fat = (495 / (1.0324 - 0.19077 * Math.log10(waist - neck) + 0.15456 * Math.log10(h))) - 450;
        // Mifflin-St Jeor BMR
        user.bmr = (10 * w) + (6.25 * h) - (5 * age) + 5;

        document.getElementById('analysis-res').style.display = 'block';
        document.getElementById('res-fat').innerText = '%' + user.fat.toFixed(1);
        document.getElementById('res-bmr').innerText = Math.round(user.bmr) + ' kcal';
        updateUI();
    }

    function updateDailyBurn() {
        const steps = document.getElementById('steps').value;
        const stepCal = steps * 0.04; // Ortalama 1 adÄ±m 0.04 kcal
        document.getElementById('step-cal').innerText = Math.round(stepCal);
        calculateTotal();
    }

    function addSport() {
        const s = document.getElementById('sportSel');
        const t = document.getElementById('sportTime').value;
        const c = Math.round(s.value * t);
        user.logs.push({type:'s', n:s.options[s.selectedIndex].text, c});
        updateUI();
    }

    function addFood() {
        const s = document.getElementById('foodSel');
        const q = document.getElementById('foodQty').value;
        const c = Math.round(s.value * q);
        user.logs.push({type:'f', n:s.options[s.selectedIndex].text, c});
        updateUI();
    }

    function calculateTotal() {
        const stepCal = document.getElementById('steps').value * 0.04;
        const sportCal = user.logs.filter(l=>l.type==='s').reduce((a,b)=>a+b.c, 0);
        const foodCal = user.logs.filter(l=>l.type==='f').reduce((a,b)=>a+b.c, 0);
        
        const totalBurn = user.bmr + stepCal + sportCal;
        const net = foodCal - totalBurn;
        
        document.getElementById('net-cal').innerText = (net > 0 ? '+' : '') + Math.round(net);
        document.getElementById('net-desc').innerText = net > 0 ? "Kalori FazlasÄ± (Kilo AlÄ±mÄ±)" : "Kalori AÃ§Ä±ÄŸÄ± (YaÄŸ YakÄ±mÄ±)";
        
        // HaftalÄ±k Tahmin
        const weekGram = (net * 7) / 7.7; // 7.7 kalori = 1 gr yaÄŸ dokusu (yaklaÅŸÄ±k)
        document.getElementById('week-result').innerText = Math.abs(Math.round(weekGram)) + " gram " + (net > 0 ? "AlÄ±ÅŸ" : "VeriÅŸ");
    }

    function updateUI() {
        document.getElementById('food-logs').innerHTML = user.logs.filter(l=>l.type==='f').map(l=>`<div class="log-item"><span>${l.n}</span><b>+${l.c}</b></div>`).join('');
        document.getElementById('sport-logs').innerHTML = user.logs.filter(l=>l.type==='s').map(l=>`<div class="log-item"><span>${l.n}</span><b>-${l.c}</b></div>`).join('');
        calculateTotal();
        localStorage.setItem('healthPro_v9', JSON.stringify(user));
    }

    window.onload = () => {
        document.getElementById('foodSel').innerHTML = foodDB.map(f=>`<option value="${f.c}">${f.n}</option>`).join('');
        document.getElementById('sportSel').innerHTML = sportDB.map(s=>`<option value="${s.c}">${s.n}</option>`).join('');
        const saved = localStorage.getItem('healthPro_v9');
        if(saved) { user = JSON.parse(saved); profAnalysis(); }
    };
</script>
</body>
</html>